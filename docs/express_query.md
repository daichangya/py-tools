# 快递查询工具

## 体验地址

您可以在以下地址体验此工具：[http://api.zthinker.com/](http://api.zthinker.com/)

## 功能概述

快递查询工具是一个用于查询快递物流信息的应用。用户可以输入快递单号，系统会自动识别快递公司并查询该快递的物流轨迹和当前状态。

## 主要功能

- 快递单号查询
- 自动识别快递公司
- 显示物流轨迹和状态更新
- 提供快递状态实时更新

## 使用方法

### Web界面使用

1. 访问快递查询页面
2. 输入要查询的快递单号
3. 点击"查询"按钮
4. 查看返回的快递物流信息

### API调用

```
GET /api/express/query?express_no=SF1234567890
```

## 技术实现

### 核心功能

1. **快递单号验证**：验证输入的快递单号格式是否有效
2. **快递公司识别**：根据单号规则自动识别快递公司
3. **物流信息查询**：调用第三方API获取物流轨迹信息
4. **数据展示**：以时间轴形式展示物流轨迹

### 快递公司识别

系统通过以下方式识别快递公司：

1. **单号规则匹配**：根据不同快递公司的单号规则进行匹配
2. **API识别**：调用第三方API进行快递公司识别
3. **历史记录匹配**：根据历史查询记录进行匹配

### 物流信息查询

系统支持多种查询方式：

1. **官方API**：直接调用各快递公司提供的官方API
2. **第三方聚合API**：使用快递鸟、快递100等第三方聚合API
3. **网页爬虫**：对于不提供API的快递公司，使用网页爬虫获取信息

### 支持的快递公司

系统支持以下主要快递公司的查询：

- 顺丰速运
- 中通快递
- 圆通速递
- 申通快递
- 韵达快递
- 百世快递
- 邮政EMS
- 京东物流
- 德邦物流
- 天天快递

## 文件结构

- `app/plugins/express_plugin.py`：插件主类，处理路由和请求
- `app/services/express_service.py`：服务类，实现快递查询的核心功能
- `app/templates/plugins/express.html`：快递查询页面模板

## API接口

### 查询快递信息

**请求**：
```
GET /api/express/query?express_no={快递单号}
```

**参数**：
- `express_no`：要查询的快递单号

**响应**：
```json
{
  "success": true,
  "data": {
    "express_no": "SF1234567890",
    "company": "顺丰速运",
    "status": "已签收",
    "updates": [
      {
        "time": "2023-07-01 08:30",
        "location": "北京市海淀区",
        "status": "已揽收"
      },
      {
        "time": "2023-07-02 10:15",
        "location": "上海市浦东新区",
        "status": "运输中"
      },
      {
        "time": "2023-07-03 09:00",
        "location": "广州市天河区",
        "status": "派送中"
      },
      {
        "time": "2023-07-03 14:30",
        "location": "广州市天河区",
        "status": "已签收"
      }
    ]
  }
}
```

### 识别快递公司

**请求**：
```
GET /api/express/detect?express_no={快递单号}
```

**参数**：
- `express_no`：要识别的快递单号

**响应**：
```json
{
  "success": true,
  "data": {
    "express_no": "SF1234567890",
    "company": "顺丰速运",
    "company_code": "SF"
  }
}
```

## 注意事项

1. 快递查询功能依赖于第三方API，可能会有调用次数限制
2. 某些快递公司可能不提供完整的物流信息
3. 系统目前主要支持国内快递查询，国际快递支持有限
4. 快递单号格式各不相同，系统会尽量自动识别，但可能存在无法识别的情况
5. 物流信息更新可能存在延迟，不一定反映最新状态

## 未来计划

1. 支持更多国际快递公司
2. 添加快递轨迹地图可视化
3. 提供快递到达时间预测
4. 增加快递提醒功能
5. 支持批量查询多个快递单号
6. 添加常用快递单号收藏功能
